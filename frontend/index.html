<!DOCTYPE html>
<html lang="es" ng-app="tupadApp">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUPAD Organizador AcadÃ©mico</title>

    <!-- Bootstrap CSS -->
    <link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="node_modules/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Toastr CSS -->
    <link href="node_modules/angular-toastr/dist/angular-toastr.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="src/styles/main.css" rel="stylesheet">
    <link href="src/styles/themes.css" rel="stylesheet">
    <link href="src/styles/components.css" rel="stylesheet">
    <link href="src/styles/notifications.css" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="src/assets/favicon.svg">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ“</text></svg>">
</head>

<body ng-controller="MainController as mainCtrl" ng-class="mainCtrl.currentTheme" ng-show="mainCtrl.isAuthenticated">
    <!-- Loading Spinner -->
    <loading-overlay loading="loading" message="Cargando aplicaciÃ³n..."></loading-overlay>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary" ng-show="mainCtrl.isAuthenticated">
        <div class="container-fluid">
            <a class="navbar-brand" href="#/dashboard">
                <i class="bi bi-mortarboard-fill"></i>
                TUPAD Organizador
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#/dashboard">
                            <i class="bi bi-house"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/horarios">
                            <i class="bi bi-calendar3"></i> Horarios
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/materias">
                            <i class="bi bi-book"></i> Materias
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/contenidos">
                            <i class="bi bi-file-text"></i> Contenidos
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/evaluaciones">
                            <i class="bi bi-clipboard-check"></i> Evaluaciones
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/notificaciones">
                            <i class="bi bi-bell"></i> Notificaciones
                            <span class="badge bg-danger ms-1" ng-if="mainCtrl.unreadNotifications > 0">{{
                                mainCtrl.unreadNotifications }}</span>
                        </a>
                    </li>
                    <li class="nav-item" ng-show="mainCtrl.user.rol === 'admin' || mainCtrl.user.rol === 'profesor'">
                        <a class="nav-link" href="#/profesores">
                            <i class="bi bi-person-badge"></i> Profesores
                        </a>
                    </li>
                </ul>

                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-person-circle"></i>
                            {{ mainCtrl.user.nombre }} {{ mainCtrl.user.apellido }}
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#/perfil">
                                    <i class="bi bi-person"></i> Mi Perfil
                                </a></li>
                            <li><a class="dropdown-item" href="#/estadisticas">
                                    <i class="bi bi-graph-up"></i> EstadÃ­sticas
                                </a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" ng-click="mainCtrl.toggleTheme()">
                                    <i class="bi" ng-class="mainCtrl.themeIcon"></i>
                                    {{ mainCtrl.themeName }}
                                </a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" ng-click="mainCtrl.logout()">
                                    <i class="bi bi-box-arrow-right"></i> Cerrar SesiÃ³n
                                </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container-fluid" ng-show="mainCtrl.isAuthenticated">
        <div ng-view></div>
    </main>

    <!-- Auth Pages -->
    <div ng-show="!mainCtrl.isAuthenticated" class="auth-container" ng-controller="AuthController as authCtrl">
        <div ng-view></div>
    </div>



    <!-- Toastr Container -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <!-- Angular and Dependencies -->
    <script src="node_modules/angular/angular.min.js"></script>
    <script src="node_modules/angular-route/angular-route.min.js"></script>
    <script src="node_modules/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="node_modules/angular-animate/angular-animate.min.js"></script>
    <script src="node_modules/angular-messages/angular-messages.min.js"></script>
    <script src="node_modules/angular-cookies/angular-cookies.min.js"></script>
    <script src="node_modules/angular-local-storage/dist/angular-local-storage.min.js"></script>

    <!-- Third Party Libraries -->
    <script src="node_modules/moment/min/moment.min.js"></script>
    <script src="node_modules/moment/locale/es.js"></script>
    <script src="node_modules/angular-moment/angular-moment.min.js"></script>
    <script src="node_modules/chart.js/dist/chart.umd.js"></script>
    <script src="node_modules/ng-file-upload/dist/ng-file-upload.min.js"></script>
    <script src="node_modules/angular-toastr/dist/angular-toastr.tpls.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Security Configuration -->
    <script src="security-config.js"></script>
    <script src="cors-config.js"></script>

    <!-- App Modules -->
    <script src="src/app.js"></script>

    <!-- Services -->
    <script src="src/services/cache.service.js"></script>
    <script src="src/services/storage.service.js"></script>
    <script src="src/services/theme.service.js"></script>
    <script src="src/services/notification.service.js"></script>
    <script src="src/services/adblock-detector.service.js"></script>
    <script src="src/services/auth.service.js"></script>
    <script src="src/services/api.service.js"></script>

    <!-- Directives -->
    <script src="src/directives/loading.directive.js"></script>
    <script src="src/directives/components.directive.js"></script>
    <script src="src/directives/validation.directive.js"></script>
    <script src="src/directives/table.directive.js"></script>
    <script src="src/directives/chart.directive.js"></script>

    <!-- Filters -->
    <script src="src/filters/custom.filters.js"></script>
    <script src="src/filters/date.filter.js"></script>
    <script src="src/filters/status.filter.js"></script>
    <script src="src/filters/role.filter.js"></script>

    <!-- Controllers -->
    <script src="src/controllers/main.controller.js"></script>
    <script src="src/controllers/login.controller.js"></script>
    <script src="src/controllers/register.controller.js"></script>
    <script src="src/controllers/auth.controller.js"></script>
    <script src="src/controllers/dashboard.controller.js"></script>
    <script src="src/controllers/horarios.controller.js"></script>
    <script src="src/controllers/materias.controller.js"></script>
    <script src="src/controllers/contenidos.controller.js"></script>
    <script src="src/controllers/evaluaciones.controller.js"></script>
    <script src="src/controllers/profesores.controller.js"></script>
    <script src="src/controllers/perfil.controller.js"></script>
    <script src="src/controllers/estadisticas.controller.js"></script>
    <script src="src/controllers/notificaciones.controller.js"></script>

    <!-- Security Post-Initialization -->
    <script src="security-post-init.js"></script>
</body>

</html>